# T009: Room Transfer System
## à¸£à¸°à¸šà¸šà¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡à¹à¸‚à¸à¸—à¸µà¹ˆà¹€à¸‚à¹‰à¸²à¸žà¸±à¸à¹à¸¥à¹‰à¸§

### ðŸŽ¯ à¸ à¸²à¸žà¸£à¸§à¸¡à¹‚à¸„à¸£à¸‡à¸à¸²à¸£

**à¸§à¸±à¸•à¸–à¸¸à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ:** à¸žà¸±à¸’à¸™à¸²à¸£à¸°à¸šà¸šà¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¹à¸‚à¸à¸—à¸µà¹ˆà¹€à¸‚à¹‰à¸²à¸žà¸±à¸à¹à¸¥à¹‰à¸§ à¹€à¸žà¸·à¹ˆà¸­à¸£à¸­à¸‡à¸£à¸±à¸šà¸ªà¸–à¸²à¸™à¸à¸²à¸£à¸“à¹Œà¸•à¹ˆà¸²à¸‡à¹† à¹€à¸Šà¹ˆà¸™ à¸«à¹‰à¸­à¸‡à¹€à¸ªà¸µà¸¢, à¸­à¸±à¸žà¹€à¸à¸£à¸”, à¸«à¸£à¸·à¸­à¸•à¸²à¸¡à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸‚à¸­à¸‡à¹à¸‚à¸

**à¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²:** 1-2 à¸ªà¸±à¸›à¸”à¸²à¸«à¹Œ

---

### ðŸ  à¸Ÿà¸µà¹€à¸ˆà¸­à¸£à¹Œà¸«à¸¥à¸±à¸ (Core Features)

#### 1. **Room Transfer Interface**
- à¸«à¸™à¹‰à¸²à¸ˆà¸­à¹€à¸¥à¸·à¸­à¸à¸«à¹‰à¸­à¸‡à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡
- à¹à¸ªà¸”à¸‡à¸«à¹‰à¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¸§à¸²à¸¡à¹€à¸‚à¹‰à¸²à¸à¸±à¸™à¹„à¸”à¹‰à¸‚à¸­à¸‡à¸›à¸£à¸°à¹€à¸ à¸—à¸«à¹‰à¸­à¸‡
- à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡ (à¸«à¸²à¸à¸¡à¸µ)

#### 2. **Transfer Validation**
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¸«à¹‰à¸­à¸‡à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡
- à¸¢à¸·à¸™à¸¢à¸±à¸™à¸£à¸²à¸„à¸²à¹à¸¥à¸°à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚
- à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
- à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸‚à¹‰à¸­à¸ˆà¸³à¸à¸±à¸” (à¸–à¹‰à¸²à¸¡à¸µ)

#### 3. **Billing Adjustment**
- à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¹ƒà¸«à¸¡à¹ˆà¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´
- à¸ˆà¸±à¸”à¸à¸²à¸£à¸„à¹ˆà¸²à¸•à¹ˆà¸²à¸‡à¸«à¹‰à¸­à¸‡ (Upgrade/Downgrade)
- à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸šà¹à¸ˆà¹‰à¸‡à¸«à¸™à¸µà¹‰à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡
- à¸šà¸±à¸™à¸—à¸¶à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹à¸›à¸¥à¸‡

#### 4. **Housekeeping Integration**
- à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¸—à¸µà¸¡à¹à¸¡à¹ˆà¸šà¹‰à¸²à¸™à¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”à¸«à¹‰à¸­à¸‡à¹€à¸”à¸´à¸¡
- à¸ˆà¸±à¸”à¹€à¸•à¸£à¸µà¸¢à¸¡à¸«à¹‰à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ
- à¸ªà¹ˆà¸‡à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ Telegram
- à¸­à¸±à¸›à¹€à¸”à¸•à¸ªà¸–à¸²à¸™à¸°à¸«à¹‰à¸­à¸‡à¸­à¸±à¸•à¹‚à¸™à¸¡à¸±à¸•à¸´

#### 5. **Guest Communication**
- à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹à¸‚à¸à¹€à¸£à¸·à¹ˆà¸­à¸‡à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡
- à¸ªà¹ˆà¸‡ SMS/Email à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸«à¹‰à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ
- Key Card à¹ƒà¸«à¸¡à¹ˆ
- à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ Wi-Fi à¹à¸¥à¸°à¸ªà¸´à¹ˆà¸‡à¸­à¸³à¸™à¸§à¸¢à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸

---

### ðŸ”„ à¸à¸£à¸°à¸šà¸§à¸™à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡ (Transfer Process)

#### Step 1: à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¸ˆà¸­à¸‡
```
ðŸ“‹ à¹€à¸¥à¸·à¸­à¸à¹à¸‚à¸à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
â”œâ”€â”€ à¸”à¸¹à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸­à¸‡à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™
â”œâ”€â”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸²à¸™à¸°à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™
â””â”€â”€ à¸¢à¸·à¸™à¸¢à¸±à¸™à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
```

#### Step 2: à¹€à¸¥à¸·à¸­à¸à¸«à¹‰à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ
```
ðŸ  à¹€à¸¥à¸·à¸­à¸à¸«à¹‰à¸­à¸‡à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡
â”œâ”€â”€ à¸à¸£à¸­à¸‡à¸«à¹‰à¸­à¸‡à¸§à¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
â”œâ”€â”€ à¹€à¸›à¸£à¸µà¸¢à¸šà¹€à¸—à¸µà¸¢à¸šà¸›à¸£à¸°à¹€à¸ à¸—à¸«à¹‰à¸­à¸‡
â”œâ”€â”€ à¹à¸ªà¸”à¸‡à¸£à¸²à¸„à¸²à¹à¸¥à¸°à¸„à¹ˆà¸²à¸•à¹ˆà¸²à¸‡
â””â”€â”€ à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸´à¹ˆà¸‡à¸­à¸³à¸™à¸§à¸¢à¸„à¸§à¸²à¸¡à¸ªà¸°à¸”à¸§à¸
```

#### Step 3: à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢
```
ðŸ’° à¸„à¸³à¸™à¸§à¸“à¸à¸²à¸£à¹€à¸‡à¸´à¸™
â”œâ”€â”€ à¸„à¹ˆà¸²à¸«à¹‰à¸­à¸‡à¸•à¹ˆà¸­à¸„à¸·à¸™à¹ƒà¸«à¸¡à¹ˆ
â”œâ”€â”€ à¸„à¹ˆà¸²à¸•à¹ˆà¸²à¸‡à¸«à¹‰à¸­à¸‡ (à¸–à¹‰à¸²à¸¡à¸µ)
â”œâ”€â”€ à¸ à¸²à¸©à¸µà¹à¸¥à¸°à¸„à¹ˆà¸²à¸šà¸£à¸´à¸à¸²à¸£
â””â”€â”€ à¸¢à¸­à¸”à¸£à¸§à¸¡à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸Šà¸³à¸£à¸°à¹€à¸žà¸´à¹ˆà¸¡
```

#### Step 4: à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
```
âœ… à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
â”œâ”€â”€ à¸šà¸±à¸™à¸—à¸¶à¸à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
â”œâ”€â”€ à¸­à¸±à¸›à¹€à¸”à¸•à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸ˆà¸­à¸‡
â”œâ”€â”€ à¸ªà¸£à¹‰à¸²à¸‡à¹ƒà¸šà¹à¸ˆà¹‰à¸‡à¸«à¸™à¸µà¹‰ (à¸–à¹‰à¸²à¸¡à¸µ)
â””â”€â”€ à¸ªà¹ˆà¸‡à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™
```

---

### ðŸ—„ï¸ Database Schema

#### Room Transfer History
```sql
CREATE TABLE room_transfers (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    booking_id INT UNSIGNED NOT NULL,
    from_room_id INT UNSIGNED NOT NULL,
    to_room_id INT UNSIGNED NOT NULL,
    transfer_date DATETIME NOT NULL,
    transfer_reason ENUM('upgrade', 'downgrade', 'maintenance', 'guest_request', 'overbooking') NOT NULL,
    price_difference DECIMAL(10,2) DEFAULT 0,
    additional_charges DECIMAL(10,2) DEFAULT 0,
    transferred_by INT UNSIGNED NOT NULL,
    guest_notified TINYINT(1) DEFAULT 0,
    housekeeping_notified TINYINT(1) DEFAULT 0,
    notes TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (booking_id) REFERENCES bookings(id),
    FOREIGN KEY (from_room_id) REFERENCES rooms(id),
    FOREIGN KEY (to_room_id) REFERENCES rooms(id),
    FOREIGN KEY (transferred_by) REFERENCES users(id),

    INDEX idx_booking_transfer (booking_id),
    INDEX idx_transfer_date (transfer_date)
);
```

#### Transfer Billing
```sql
CREATE TABLE transfer_billing (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY,
    transfer_id INT UNSIGNED NOT NULL,
    original_rate DECIMAL(10,2) NOT NULL,
    new_rate DECIMAL(10,2) NOT NULL,
    rate_difference DECIMAL(10,2) NOT NULL,
    nights_affected INT NOT NULL,
    additional_services DECIMAL(10,2) DEFAULT 0,
    total_adjustment DECIMAL(10,2) NOT NULL,
    payment_status ENUM('pending', 'paid', 'waived') DEFAULT 'pending',
    payment_method VARCHAR(50),
    payment_date DATETIME NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (transfer_id) REFERENCES room_transfers(id),
    INDEX idx_payment_status (payment_status)
);
```

---

### ðŸ“± UI/UX Design

#### Transfer Modal
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ”„ à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡à¹à¸‚à¸                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ‘¤ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹à¸‚à¸                          â”‚
â”‚  â€¢ à¸Šà¸·à¹ˆà¸­: à¸„à¸¸à¸“à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ                  â”‚
â”‚  â€¢ à¸«à¹‰à¸­à¸‡à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™: 101 (Standard)         â”‚
â”‚  â€¢ à¸§à¸±à¸™à¸—à¸µà¹ˆà¹€à¸‚à¹‰à¸²à¸žà¸±à¸: 15/01/2024             â”‚
â”‚  â€¢ à¸§à¸±à¸™à¸—à¸µà¹ˆà¸­à¸­à¸: 17/01/2024                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ  à¹€à¸¥à¸·à¸­à¸à¸«à¹‰à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ                       â”‚
â”‚  [DropDown: à¸›à¸£à¸°à¹€à¸ à¸—à¸«à¹‰à¸­à¸‡]                 â”‚
â”‚  [Grid: à¸«à¹‰à¸­à¸‡à¸§à¹ˆà¸²à¸‡] 102 103 105 201...    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ’° à¸à¸²à¸£à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢                   â”‚
â”‚  â€¢ à¸£à¸²à¸„à¸²à¹€à¸”à¸´à¸¡: à¸¿1,500/à¸„à¸·à¸™                â”‚
â”‚  â€¢ à¸£à¸²à¸„à¸²à¹ƒà¸«à¸¡à¹ˆ: à¸¿2,000/à¸„à¸·à¸™                â”‚
â”‚  â€¢ à¸„à¹ˆà¸²à¸•à¹ˆà¸²à¸‡: à¸¿500/à¸„à¸·à¸™ Ã— 2 à¸„à¸·à¸™ = à¸¿1,000   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ðŸ“ à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢                       â”‚
â”‚  [Dropdown: à¹€à¸¥à¸·à¸­à¸à¹€à¸«à¸•à¸¸à¸œà¸¥]               â”‚
â”‚  [TextArea: à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [à¸¢à¸à¹€à¸¥à¸´à¸] [à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢] âœ…           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ðŸŽ›ï¸ à¸£à¸°à¸šà¸šà¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™

#### Telegram Notifications
```php
ðŸ”„ à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡à¹à¸‚à¸

ðŸ‘¤ à¹à¸‚à¸: à¸„à¸¸à¸“à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ
ðŸ  à¸ˆà¸²à¸: à¸«à¹‰à¸­à¸‡ 101 (Standard)
âž¡ï¸ à¹„à¸›: à¸«à¹‰à¸­à¸‡ 201 (Deluxe)
ðŸ“… à¸§à¸±à¸™à¸—à¸µà¹ˆ: 15/01/2024
ðŸ’° à¸„à¹ˆà¸²à¸•à¹ˆà¸²à¸‡: +à¸¿1,000
ðŸ“‹ à¹€à¸«à¸•à¸¸à¸œà¸¥: Upgrade à¸•à¸²à¸¡à¸„à¸§à¸²à¸¡à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹à¸‚à¸

ðŸ§¹ à¸‡à¸²à¸™à¹à¸¡à¹ˆà¸šà¹‰à¸²à¸™:
â€¢ à¸—à¸³à¸„à¸§à¸²à¸¡à¸ªà¸°à¸­à¸²à¸”à¸«à¹‰à¸­à¸‡ 101
â€¢ à¹€à¸•à¸£à¸µà¸¢à¸¡à¸«à¹‰à¸­à¸‡ 201

ðŸ‘¤ à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¹‚à¸”à¸¢: à¸žà¸™à¸±à¸à¸‡à¸²à¸™à¸•à¹‰à¸­à¸™à¸£à¸±à¸š
```

#### Email/SMS à¹à¸‚à¸
```
à¹€à¸£à¸µà¸¢à¸™ à¸„à¸¸à¸“à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ

à¸‚à¸­à¹à¸ˆà¹‰à¸‡à¹ƒà¸«à¹‰à¸—à¸£à¸²à¸šà¸§à¹ˆà¸²à¸«à¹‰à¸­à¸‡à¸žà¸±à¸à¸‚à¸­à¸‡à¸—à¹ˆà¸²à¸™à¹„à¸”à¹‰à¸–à¸¹à¸à¸¢à¹‰à¸²à¸¢
à¸ˆà¸²à¸: à¸«à¹‰à¸­à¸‡ 101 à¹„à¸›: à¸«à¹‰à¸­à¸‡ 201

à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”:
â€¢ à¸›à¸£à¸°à¹€à¸ à¸—à¸«à¹‰à¸­à¸‡: Deluxe Room
â€¢ Key Card à¹ƒà¸«à¸¡à¹ˆ: à¸£à¸±à¸šà¹„à¸”à¹‰à¸—à¸µà¹ˆà¹€à¸„à¸²à¸™à¹Œà¹€à¸•à¸­à¸£à¹Œ
â€¢ Wi-Fi: Hotel_Guest / à¸£à¸«à¸±à¸ª: 12345
â€¢ à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡: à¸¿1,000

à¸‚à¸­à¸­à¸ à¸±à¸¢à¹ƒà¸™à¸„à¸§à¸²à¸¡à¹„à¸¡à¹ˆà¸ªà¸°à¸”à¸§à¸
à¹‚à¸£à¸‡à¹à¸£à¸¡ ABC
```

---

### ðŸ”§ Business Rules

#### Transfer Eligibility
```php
// à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡
$canTransfer = [
    'guest_checked_in' => true,      // à¹à¸‚à¸à¸•à¹‰à¸­à¸‡à¹€à¸Šà¹‡à¸„à¸­à¸´à¸™à¹à¸¥à¹‰à¸§
    'payment_current' => true,       // à¸„à¹ˆà¸²à¸«à¹‰à¸­à¸‡à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™à¸Šà¸³à¸£à¸°à¹à¸¥à¹‰à¸§
    'target_room_available' => true, // à¸«à¹‰à¸­à¸‡à¸›à¸¥à¸²à¸¢à¸—à¸²à¸‡à¸§à¹ˆà¸²à¸‡
    'no_pending_issues' => true,     // à¹„à¸¡à¹ˆà¸¡à¸µà¸›à¸±à¸à¸«à¸²à¸„à¹‰à¸²à¸‡à¸Šà¸³à¸£à¸°
    'within_stay_period' => true     // à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸Šà¹ˆà¸§à¸‡à¸à¸²à¸£à¸žà¸±à¸
];
```

#### Rate Calculation
```php
// à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¸•à¹ˆà¸²à¸‡à¸«à¹‰à¸­à¸‡
function calculateTransferCost($fromRoom, $toRoom, $remainingNights) {
    $originalRate = $fromRoom['current_rate'];
    $newRate = $toRoom['rate'];
    $rateDifference = $newRate - $originalRate;
    $totalDifference = $rateDifference * $remainingNights;

    return [
        'rate_difference_per_night' => $rateDifference,
        'total_difference' => $totalDifference,
        'tax' => $totalDifference * 0.07,
        'service_charge' => $totalDifference * 0.10
    ];
}
```

---

### ðŸ“‹ Implementation Steps

#### Phase 1: Core Transfer System (Week 1)
- [ ] Transfer interface design
- [ ] Room availability checking
- [ ] Basic transfer functionality
- [ ] Database schema implementation

#### Phase 2: Billing Integration (Week 1)
- [ ] Rate calculation engine
- [ ] Billing adjustment system
- [ ] Payment processing
- [ ] Invoice generation

#### Phase 3: Notifications (Week 2)
- [ ] Telegram integration
- [ ] Email/SMS notifications
- [ ] Housekeeping alerts
- [ ] Guest communication

#### Phase 4: Validation & Testing (Week 2)
- [ ] Business rules validation
- [ ] Transfer history tracking
- [ ] Error handling
- [ ] User acceptance testing

---

### ðŸŽ¯ Success Metrics

#### Operational Efficiency
- Transfer process completion < 5 minutes
- 100% accurate billing calculations
- Real-time inventory updates
- Zero data inconsistencies

#### User Experience
- Intuitive transfer interface
- Clear cost breakdowns
- Automated notifications
- Comprehensive audit trail

---

### ðŸ“ File Structure

```
t009_room_transfer/
â”œâ”€â”€ rooms/
â”‚   â”œâ”€â”€ transfer.php              # Main transfer interface
â”‚   â”œâ”€â”€ transfer_process.php      # Transfer processing logic
â”‚   â””â”€â”€ transfer_history.php      # Transfer history view
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ get_available_rooms.php   # AJAX: Available rooms
â”‚   â”œâ”€â”€ calculate_transfer.php    # AJAX: Cost calculation
â”‚   â””â”€â”€ process_transfer.php      # AJAX: Process transfer
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ transfer_engine.php       # Core transfer logic
â”‚   â”œâ”€â”€ billing_calculator.php    # Billing calculations
â”‚   â””â”€â”€ notification_service.php  # Notification handling
â”œâ”€â”€ reports/
â”‚   â””â”€â”€ transfer_report.php       # Transfer analytics
â””â”€â”€ database/
    â”œâ”€â”€ transfer_schema.sql       # Database schema
    â””â”€â”€ transfer_sample_data.sql  # Sample data
```

---

### ðŸš€ Quick Start Guide

#### For Reception Staff
1. à¹„à¸›à¸—à¸µà¹ˆ Room Board
2. à¸„à¸¥à¸´à¸ "à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡" à¹ƒà¸™à¸«à¹‰à¸­à¸‡à¸—à¸µà¹ˆà¸¡à¸µà¹à¸‚à¸
3. à¹€à¸¥à¸·à¸­à¸à¸«à¹‰à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸ˆà¸²à¸à¸£à¸²à¸¢à¸à¸²à¸£
4. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢
5. à¹ƒà¸ªà¹ˆà¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢
6. à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢

#### For Managers
1. à¸”à¸¹à¸›à¸£à¸°à¸§à¸±à¸•à¸´à¸à¸²à¸£à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡à¹ƒà¸™ Reports
2. à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸–à¸´à¸•à¸´à¸à¸²à¸£ Upgrade/Downgrade
3. à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸„à¸§à¸²à¸¡à¸–à¸µà¹ˆà¸à¸²à¸£à¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡
4. Monitor customer satisfaction

---

**à¸«à¸¡à¸²à¸¢à¹€à¸«à¸•à¸¸:** T009 à¸™à¸µà¹‰à¹€à¸™à¹‰à¸™à¸à¸²à¸£à¸žà¸±à¸’à¸™à¸²à¸£à¸°à¸šà¸šà¸¢à¹‰à¸²à¸¢à¸«à¹‰à¸­à¸‡à¸—à¸µà¹ˆà¸„à¸£à¸­à¸šà¸„à¸¥à¸¸à¸¡à¸—à¸¸à¸à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ à¸•à¸±à¹‰à¸‡à¹à¸•à¹ˆà¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸à¸«à¹‰à¸­à¸‡ à¸à¸²à¸£à¸„à¸³à¸™à¸§à¸“à¸„à¹ˆà¸²à¹ƒà¸Šà¹‰à¸ˆà¹ˆà¸²à¸¢ à¹„à¸›à¸ˆà¸™à¸–à¸¶à¸‡à¸à¸²à¸£à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™à¹à¸¥à¸°à¸à¸²à¸£à¸•à¸´à¸”à¸•à¸²à¸¡à¸œà¸¥ à¹€à¸žà¸·à¹ˆà¸­à¹ƒà¸«à¹‰à¸à¸²à¸£à¸šà¸£à¸´à¸à¸²à¸£à¹à¸‚à¸à¹€à¸›à¹‡à¸™à¹„à¸›à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸²à¸šà¸£à¸·à¹ˆà¸™à¹à¸¥à¸°à¸¡à¸µà¸›à¸£à¸°à¸ªà¸´à¸—à¸˜à¸´à¸ à¸²à¸ž